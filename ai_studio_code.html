<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Premium Glass Player</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap');

        :root {
            --glass: rgba(255, 255, 255, 0.04);
            --glass-heavy: rgba(10, 10, 10, 0.85);
            --border: rgba(255, 255, 255, 0.15);
            --accent: #00f2ff;
            --accent-glow: rgba(0, 242, 255, 0.5);
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background: #000; font-family: 'Outfit', sans-serif;
            color: white; overflow: hidden;
        }

        /* Video Layer */
        .main-container {
            position: relative;
            width: 100vw; height: 100vh;
            background: #000;
            display: flex; justify-content: center; align-items: center;
        }

        video { width: 100%; height: 100%; transition: 0.4s ease; }

        /* Aspect Ratio Logic */
        .ratio-fit { object-fit: contain; }
        .ratio-fill { object-fit: fill !important; } /* Force fill screen */
        .ratio-zoom { object-fit: cover; }
        .ratio-16-9 { aspect-ratio: 16/9; object-fit: cover; }

        /* UI Visibility Toggle */
        .ui-hidden .header-panel, 
        .ui-hidden .controls-overlay {
            opacity: 0 !important;
            transform: translateY(50px) !important;
            pointer-events: none;
        }

        /* Top Bar - URL Panel */
        .header-panel {
            position: fixed; top: 30px; left: 50%;
            transform: translateX(-50%); width: 70%;
            z-index: 100; transition: 0.6s cubic-bezier(0.2, 1, 0.3, 1);
        }

        .url-box {
            display: flex; background: var(--glass);
            backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px);
            border: 1px solid var(--border); padding: 8px;
            border-radius: 100px; box-shadow: 0 20px 40px rgba(0,0,0,0.6);
        }

        .url-box input {
            flex: 1; background: transparent; border: none;
            padding: 10px 30px; color: white; font-size: 1.1rem;
            outline: none; font-family: 'Outfit';
        }

        .btn-load {
            background: #fff; color: #000; border: none;
            padding: 0 30px; border-radius: 50px; font-weight: 700;
            cursor: pointer; transition: 0.3s;
        }

        .btn-load:hover { background: var(--accent); color: #fff; }

        /* Bottom Controls Overlay */
        .controls-overlay {
            position: absolute; bottom: 40px; left: 50%;
            transform: translateX(-50%); width: 90%;
            z-index: 100; transition: 0.6s cubic-bezier(0.2, 1, 0.3, 1);
        }

        .glass-dock {
            background: var(--glass-heavy);
            backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px);
            border: 1px solid var(--border); border-radius: 30px;
            padding: 25px 40px; box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        }

        .progress-container {
            width: 100%; height: 8px; background: rgba(255,255,255,0.1);
            border-radius: 10px; margin-bottom: 25px; cursor: pointer;
        }

        .progress-bar {
            height: 100%; background: var(--accent); width: 0%;
            border-radius: 10px; box-shadow: 0 0 15px var(--accent-glow);
        }

        .button-row {
            display: flex; align-items: center; justify-content: space-between;
        }

        .group { display: flex; align-items: center; gap: 20px; }

        .icon-btn {
            background: rgba(255,255,255,0.05); border: 1px solid var(--border);
            width: 60px; height: 60px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.3s;
        }

        .icon-btn:hover { background: var(--accent); transform: scale(1.1); }
        .icon-btn svg { width: 28px; height: 28px; fill: #fff; }

        /* Setting Dropdowns */
        .select-group { display: flex; flex-direction: column; }
        .select-group label { font-size: 11px; color: var(--accent); font-weight: 700; margin-left: 5px; }
        
        select {
            background: transparent; color: white; border: none;
            font-size: 1rem; outline: none; cursor: pointer;
        }
        option { background: #111; }

        /* Disappear Button Style */
        .hide-btn { border-color: #ff4b4b !important; }
        .hide-btn:hover { background: #ff4b4b !important; }
    </style>
</head>
<body id="body">

    <!-- Header: URL Input -->
    <div class="header-panel" id="uiHeader">
        <div class="url-box">
            <input type="text" id="streamUrl" placeholder="Paste link (m3u8, mp4, mkv, webm)...">
            <button class="btn-load" onclick="initMedia()">LOAD</button>
        </div>
    </div>

    <div class="main-container" id="playerView">
        <video id="videoMain" class="ratio-fit" playsinline></video>

        <!-- Controls -->
        <div class="controls-overlay" id="uiFooter">
            <div class="progress-container" id="progCont">
                <div class="progress-bar" id="progBar"></div>
            </div>

            <div class="glass-dock">
                <div class="button-row">
                    <!-- Playback Controls -->
                    <div class="group">
                        <button class="icon-btn" onclick="seek(-10)">
                            <svg viewBox="0 0 24 24"><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/><text x="10" y="15" font-size="6" fill="white" font-weight="bold">-10</text></svg>
                        </button>
                        
                        <button class="icon-btn" id="playBtn">
                            <svg id="svgPlay" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            <svg id="svgPause" viewBox="0 0 24 24" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                        </button>

                        <button class="icon-btn" onclick="seek(10)">
                            <svg viewBox="0 0 24 24"><path d="M12 5V1l5 5-5 5V7c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6h2c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8z"/><text x="8" y="15" font-size="6" fill="white" font-weight="bold">+10</text></svg>
                        </button>
                    </div>

                    <!-- Meta Controls -->
                    <div class="group">
                        <div class="select-group">
                            <label>AUDIO</label>
                            <select id="audioSel"><option>Default</option></select>
                        </div>
                        <div class="select-group">
                            <label>SUBS</label>
                            <select id="subSel"><option value="-1">None</option></select>
                        </div>
                    </div>

                    <!-- Display Controls -->
                    <div class="group">
                        <div class="select-group">
                            <label>ASPECT</label>
                            <select id="ratioSel">
                                <option value="ratio-fit">Fit</option>
                                <option value="ratio-fill">Fill Screen</option>
                                <option value="ratio-zoom">Zoom</option>
                                <option value="ratio-16-9">16:9</option>
                            </select>
                        </div>
                        <button class="icon-btn hide-btn" onclick="toggleUI(true)" title="Hide UI">
                            <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                        </button>
                        <button class="icon-btn" onclick="toggleFS()">
                            <svg viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script>
    const video = document.getElementById('videoMain');
    const playBtn = document.getElementById('playBtn');
    const svgPlay = document.getElementById('svgPlay');
    const svgPause = document.getElementById('svgPause');
    const audioSel = document.getElementById('audioSel');
    const subSel = document.getElementById('subSel');
    const ratioSel = document.getElementById('ratioSel');
    const progBar = document.getElementById('progBar');
    const progCont = document.getElementById('progCont');
    const body = document.getElementById('body');
    
    let hls = new Hls();

    function initMedia() {
        const url = document.getElementById('streamUrl').value;
        if(!url) return;

        // Reset
        audioSel.innerHTML = '<option>Default</option>';
        subSel.innerHTML = '<option value="-1">None</option>';
        
        if (url.includes('.m3u8')) {
            if (Hls.isSupported()) {
                hls.destroy();
                hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, () => {
                    video.play();
                    hls.audioTracks.forEach((t, i) => audioSel.add(new Option(t.name || i, i)));
                    hls.subtitleTracks.forEach((t, i) => subSel.add(new Option(t.name || i, i)));
                });
                audioSel.onchange = () => hls.audioTrack = audioSel.value;
                subSel.onchange = () => hls.subtitleTrack = subSel.value;
            }
        } else {
            // Standard MP4, MKV, WebM Support
            hls.destroy();
            video.src = url;
            video.play();
        }
    }

    // Seek Logic
    function seek(amount) {
        video.currentTime += amount;
    }

    // UI Disappear Logic
    let uiTimer;
    function toggleUI(forceHide = false) {
        if(forceHide) {
            body.classList.add('ui-hidden');
        } else {
            body.classList.remove('ui-hidden');
            clearTimeout(uiTimer);
            uiTimer = setTimeout(() => body.classList.add('ui-hidden'), 5000);
        }
    }

    // Show UI on mouse movement
    document.addEventListener('mousemove', () => toggleUI(false));
    document.addEventListener('click', () => toggleUI(false));

    // Playback
    playBtn.onclick = () => {
        if (video.paused) video.play(); else video.pause();
    };

    video.onplay = () => { svgPlay.style.display = 'none'; svgPause.style.display = 'block'; };
    video.onpause = () => { svgPlay.style.display = 'block'; svgPause.style.display = 'none'; };

    // Ratios
    ratioSel.onchange = () => video.className = ratioSel.value;

    // Timeline
    video.ontimeupdate = () => {
        progBar.style.width = (video.currentTime / video.duration) * 100 + '%';
    };

    progCont.onclick = (e) => {
        const rect = progCont.getBoundingClientRect();
        video.currentTime = ((e.clientX - rect.left) / rect.width) * video.duration;
    };

    function toggleFS() {
        if (!document.fullscreenElement) document.documentElement.requestFullscreen();
        else document.exitFullscreen();
    }

    // Default Demo Link
    document.getElementById('streamUrl').value = "https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8";
</script>
</body>
</html>